var lvtuanApp=angular.module("lvtuanApp.Ctrl",["ionic","ngSanitize","ngFileUpload","listModule"]);lvtuanApp.controller("HeaderController",function(e,o){e.isActives=function(e){return e===o.path()}}),lvtuanApp.directive("hideTabs",function(e){return{restrict:"A",link:function(o,t,n){o.$on("$ionicView.beforeEnter",function(){o.$watch(n.hideTabs,function(o){e.hideTabs=o})}),o.$on("$ionicView.beforeLeave",function(){e.hideTabs=!1})}}}),lvtuanApp.constant("$ionicLoadingConfig",{content:'<ion-spinner icon="android"></ion-spinner>',animation:"fade-in",showBackdrop:!0,maxWidth:200,showDelay:0}),lvtuanApp.controller("ionicNavBarDelegateCtrl",function(e,o,t,n){o(function(){location.href="#/index"},2e3,[!1])}),lvtuanApp.controller("indexCtrl",function(e,o,t,n,a,r,i){var s=1;e.moredata=!0,e.items=[],e.loadMore=function(){t.get("http://"+n.hostName+"/lawyer/list_lawyers?page="+s++ +"&rows_per_page=4",{cache:!0,headers:{"Content-Type":"application/json",Authorization:"bearer "+n.token}}).success(function(o){return console.info(o.data),o.data.length>0?(e.moredata=!0,void(e.items=e.items.concat(o.data))):(e.moredata=!1,e.$broadcast("scroll.infiniteScrollComplete"),!1)}).error(function(e,o){layer.msg(o),console.info(JSON.stringify(e))})["finally"](function(){e.$broadcast("scroll.infiniteScrollComplete")})},e.$on("$stateChangeSuccess",function(){e.loadMore()}),location.href="#/index",e.mylvteam=function(){location.href="#/mylvteam"}}),lvtuanApp.controller("loginCtrl",function(e,o,t,n){function a(e){if(""==e.username)return layer.show("请输入手机号码或者邮箱！"),!1;if(e.username.match(i)){if(null==e.username.match(i))return layer.show("请输入正确的手机号码!"),!1}else if(null==e.username.match(r))return layer.show("请输入正确邮箱账号!"),!1;return""==e.password?(layer.show("请输入密码"),!1):!0}var r=/^(([0-9a-zA-Z]+)|([0-9a-zA-Z]+[_.0-9a-zA-Z-]*[0-9a-zA-Z]+))@([a-zA-Z0-9-]+[.])+([a-zA-Z]{2} |net|NET|com|COM|gov|GOV|mil|MIL|org|ORG|edu|EDU|int|INT|cn|CN)$/,i=/^(0|86|17951)?(13[0-9]|15[012356789]|17[678]|18[0-9]|14[57])[0-9]{8}$/;o.submit=function(){localStorage.removeItem("user_group_id"),localStorage.removeItem("is_verified"),s()};var s=function(){var e=layer.getParams("#loginForm");a(e)&&n.post("http://"+t.hostName+"/login",{username:e.username,password:e.password},{headers:{"Content-Type":"application/json"}}).success(function(e){console.info(e.data),layer.show("登陆成功！");var o=e.data.id,t=e.data.user_group_id,n=e.data.is_verified;localStorage.setItem("user_id",JSON.stringify(o)),localStorage.setItem("token",e.token),localStorage.setItem("user_group_id",JSON.stringify(t)),localStorage.setItem("is_verified",JSON.stringify(n)),location.href="#/center",window.location.reload(),$(":input","#questions_form").not("textarea :submit, :reset, :hidden").val("")}).error(function(e,o){var t=JSON.stringify(e.error_messages.password);layer.show(t)})}}),lvtuanApp.controller("registerCtrl",function(e,o,t){e.phonecode=function(){var e=layer.getParams("#registerForm");if(""==e.username)return layer.show("请输入手机号码！"),!1;var n="phone="+e.username;return t.post("http://"+o.hostName+"/send-code?"+n,{headers:{"Content-Type":"application/json",Authorization:"bearer "+o.token}}).success(function(e){layer.show("验证码已发送到您的手机！")}).error(function(e,o){var t=JSON.stringify(e.error_messages.password);layer.show(t)}),!0};var n;e.isCheckeChange=function(){n=e.isChecke.checked,console.info(n)},e.isChecke={checked:!1},e.submit=function(){var e=layer.getParams("#registerForm");return""==e.username?(layer.show("请输入手机号码！"),!1):""==e.phonecode?(layer.show("请输入验证码！"),!1):""==e.password?(layer.show("请输入密码！"),!1):void 0==n||0==n?(layer.show("请阅读协议！"),!1):(t.post("http://"+o.hostName+"/register",{username:e.username,password:e.password},{headers:{"Content-Type":"application/json",Authorization:"bearer "+o.token}}).success(function(e){layer.show("注册成功！"),$(":input","#questions_form").not("textarea :submit, :reset, :hidden").val(""),$state.go("center",{reload:!0})}).error(function(e,o){var t=JSON.stringify(e.error_messages.username);layer.show(t)}),!0)}}),lvtuanApp.controller("resetpwdCtrl",function(e,o,t){e.user={},e.save=function(n){return n.old_password==n.new_password&&n.old_password==n.new_password_retype&&n.new_password==n.new_password_retype?(layer.show("修改密码不能和初始密码一样！"),!1):n.new_password.length!=n.new_password_retype.length?(layer.show("重置密码的长度不一致！"),!1):n.new_password!=n.new_password_retype?(layer.show("两次输入的密码不一致！"),!1):(o.post("http://"+t.hostName+"/center/reset_pass",e.user,{headers:{"Content-Type":"application/json",Authorization:"bearer "+t.token}}).success(function(o){layer.show("修改成功！"),e.user={},location.href="#/login",window.location.reload()}).error(function(e,o){var t=JSON.stringify(e.error_messages);layer.show(t)}),!0)}}),lvtuanApp.controller("groupCtrl",function(e,o,t,n){e.jumplogin=function(){console.info(n.is_lawyer),t.go("login",{reload:!0})}}),lvtuanApp.controller("groupListCtrl",function(e,o,t,n){var a=1;e.moredata=!0,e.items=[],e.doRefresh=function(){a=1,e.items=[],e.loadMore()},e.loadMore=function(){o.get("http://"+t.hostName+"/group/list/mine?page="+a++,{cache:!0,headers:{"Content-Type":"application/json",Authorization:"bearer "+t.token}}).success(function(o){return console.info("文库",o.data),o.data.length>0?(o.data.length>9?e.moredata=!0:e.moredata=!1,void(e.items=e.items.concat(o.data))):(layer.show("暂无数据！"),e.moredata=!1,!1)}).error(function(e,o){layer.msg(o),console.info(JSON.stringify(e))})["finally"](function(){e.$broadcast("scroll.refreshComplete"),e.$broadcast("scroll.infiniteScrollComplete")})}}),lvtuanApp.controller("groupTeleviseCtrl",function(e,o,t,n){var a=1;e.moredata=!0,e.televise=[],e.doRefresh=function(){a=1,e.televise=[],e.loadMore()},e.loadMore=function(){o.get("http://"+n.hostName+"/microblog/list/all?page="+a++,{cache:!0,headers:{"Content-Type":"application/json",Authorization:"bearer "+n.token}}).success(function(o){return console.info("广播",o.data),o.data.length>0?(o.data.length>9?e.moredata=!0:e.moredata=!1,void(e.televise=e.televise.concat(o.data))):(layer.show("暂无数据！"),e.moredata=!1,!1)}).error(function(e,o){layer.msg(o),console.info(JSON.stringify(e))})["finally"](function(){e.$broadcast("scroll.refreshComplete"),e.$broadcast("scroll.infiniteScrollComplete")})},e.likes=function(t,a){o.post("http://"+n.hostName+"/like",{item_type:"post",item_id:t},{headers:{"Content-Type":"application/json",Authorization:"bearer "+n.token}}).success(function(o){console.info(o);var t=o.data;e.televise[a].likes_count=t.likes_count,layer.show("点赞成功！")}).error(function(e,o){console.info(e);var t="";JSON.stringify(e.error_messages.item_type)?t=JSON.stringify(e.error_messages.item_type[0]):JSON.stringify(e.error_messages.item_id)&&(t=JSON.stringify(e.error_messages.item_id[0])),layer.show(t)})}}),lvtuanApp.controller("groupAttentionCtrl",function(e,o,t,n){function a(){var e=layer.getParams("#search_form");r(e)}function r(t){var a="";a+=t.q?"http://"+n.hostName+"/group/recommend?q="+t.q+"&page="+i++:"http://"+n.hostName+"/group/recommend?page="+i++,o.get(a,{headers:{"Content-Type":"application/json",Authorization:"bearer "+n.token}}).success(function(o){return console.info("推荐关注",o.data),o.data.length>0?(o.data.length>9?e.moredata=!0:e.moredata=!1,void(e.recommendeds=e.recommendeds.concat(o.data))):(layer.show("暂无数据！"),e.moredata=!1,!1)}).error(function(e,o){layer.msg(o),console.info(JSON.stringify(e))})["finally"](function(){e.$broadcast("scroll.refreshComplete"),e.$broadcast("scroll.infiniteScrollComplete")})}var i=1;e.moredata=!0,e.recommendeds=[],e.search=function(){i=1,e.recommendeds=[],a()},e.doRefresh=function(){i=1,e.recommendeds=[],a()},e.loadMore=function(){a()},e.groupjoin=function(t,a){i=1;var t=t;o.post("http://"+n.hostName+"/group/"+t+"/join?page="+i++,{},{cache:!0,headers:{Accept:"application/json",Authorization:"bearer "+n.token}}).success(function(o){return o.data?(e.recommendeds.splice(a,1),void layer.show("已关注 加入成功！")):(layer.show("暂无数据！"),e.moredata=!1,!1)}).error(function(e,o){var t=JSON.stringify(e);400==t.status_code&&layer.show("你已经是该圈子的成员了!"),console.info(JSON.stringify(e)),console.info(JSON.stringify(o))})["finally"](function(){e.$broadcast("scroll.refreshComplete"),e.$broadcast("scroll.infiniteScrollComplete")})}}),lvtuanApp.controller("groupviewCtrl",function(e,o,t,n,a){function r(e){var o=$("#user_name").val(),t=$("#user_password").val();return null==o||null==t?!1:o==e.user_id&&t==e.pwd?!0:void 0}console.info("圈子详情"),e.user_name="",e.user_password="",$("#user_name").val(),$("#user_password").val(),o.get("http://"+n.hostName+"/group/"+a.id+"/chat",{cache:!0,headers:{"Content-Type":"application/json",Authorization:"bearer "+n.token}}).success(function(o){console.info("圈子详情",o.data);var t=o.data;e.user_name=t.user_id,e.user_password=t.pwd,e.id=t.id,localStorage.setItem("goup_id",JSON.stringify(e.id)),localStorage.setItem("easemob_id",JSON.stringify(t.easemob_id));var n=null;n=setInterval(function(){1==r(t)&&(clearInterval(n),login())},2e3)}).error(function(e,o){layer.msg(o),console.info(JSON.stringify(e))}),e.site=function(){location.href="#/group/site/"+e.id,window.location.reload()}}),lvtuanApp.controller("groupsiteCtrl",function(e,o,t,n,a,r,i,s){console.info("圈子设置"),e.id=JSON.parse(localStorage.getItem("goup_id")),o.get("http://"+n.hostName+"/group/"+e.id+"/detail",{cache:!0,headers:{"Content-Type":"application/json",Authorization:"bearer "+n.token}}).success(function(o){console.info("圈子设置",o.data),e.group=o.data,e.group_name=e.group.group_name,e.is_mine=e.group.is_mine,e.file=e.group.group_avatar}).error(function(e,o){layer.msg(o),console.info(JSON.stringify(e))}),e.del=function(t,a){o.get("http://"+n.hostName+"/group/"+e.id+"/removemember/"+t,{cache:!0,headers:{"Content-Type":"application/json",Authorization:"bearer "+n.token}}).success(function(o){layer.show(o.data),e.group.members.splice(a,1)}).error(function(e,o){console.info(e),console.info(JSON.stringify(e))})},e.logoutGroup=function(){var t=i.confirm({title:"确定解散该群？",cancelText:"取消",okText:"确认"});t.then(function(t){return t?void o.get("http://"+n.hostName+"/group/"+e.id+"/dissolution",{cache:!0,headers:{"Content-Type":"application/json",Authorization:"bearer "+n.token}}).success(function(e){layer.show(e.data),location.href="#/group/list",window.location.reload()}).error(function(e,o){console.info(e),console.info(JSON.stringify(e))}):!1})},e.edit=function(e){var t=layer.getParams("#myForm");""==t.group_name?layer.show("圈子名称不能为空！"):o.post("http://"+n.hostName+"/group/"+a.id+"/edit",{group_name:t.group_name,group_avatar:t.group_avatar},{headers:{"Content-Type":"application/json",Authorization:"bearer "+n.token}}).success(function(e){layer.show("修改成功！")}).error(function(e,o){var t=JSON.stringify(e.error_messages);layer.show(t)})},e.uploadFiles=function(o){o&&e.upload(o)},e.upload=function(o){s.upload({headers:{"Content-Type":"application/json",Authorization:"bearer "+n.token},url:"http://"+n.hostName+"/group/uploadImage",data:{group_avatar:o}}).then(function(o){var t="http://"+n.hostName+"/"+o.data.data;e.file=t,r(function(){e.result=o.data})},function(e){if(e.status>0){var o=e.status+": "+e.data;console.info("errorMsg",o),layer.show(o)}},function(o){var t=parseInt(100*o.loaded/o.total);e.progress=t})},e.quitGroup=function(){var t=i.confirm({title:"确定退出该群？",cancelText:"取消",okText:"确认"});t.then(function(t){return t?void o.get("http://"+n.hostName+"/group/"+e.id+"/quit",{cache:!0,headers:{"Content-Type":"application/json",Authorization:"bearer "+n.token}}).success(function(e){layer.show(e.data),location.href="#/group/list",window.location.reload()}).error(function(e,o){console.info(e),console.info(JSON.stringify(e))}):!1})}}),lvtuanApp.controller("groupaddCtrl",function(e,o,t,n,a){console.info("添加成员"),console.info(a.id);var r=1;e.moredata=!0,e.items=[],e.doRefresh=function(){r=1,e.items=[],e.loadMore()},e.loadMore=function(){o.get("http://"+n.hostName+"/group/"+a.id+"/addmember",{cache:!0,headers:{"Content-Type":"application/json",Authorization:"bearer "+n.token}}).success(function(o){return o.data.length>0?(o.data.length>9?e.moredata=!0:e.moredata=!1,void(e.items=e.items.concat(o.data))):(layer.show("暂无数据！"),e.moredata=!1,!1)}).error(function(e,o){layer.msg(o),console.info(JSON.stringify(e))})["finally"](function(){e.$broadcast("scroll.refreshComplete"),e.$broadcast("scroll.infiniteScrollComplete")})},Array.prototype.remove=function(e){if(isNaN(e)||e>this.length)return!1;for(var o=0,t=0;o<this.length;o++)this[o]!=this[e]&&(this[t++]=this[o]);this.length-=1},e.selIds=[],e.checkItem=function(o,t){if(0==o){var n;angular.forEach(e.selIds,function(e,o){e==t&&(n=o)}),e.selIds.remove(n,n)}else e.selIds.push(t)},e.createSubmit=function(){o.post("http://"+n.hostName+"/group/"+a.id+"/addmember",{members:e.selIds},{headers:{"Content-Type":"application/json",Authorization:"bearer "+n.token}}).success(function(e){console.info(e),location.href="#/group/site/"+a.id,window.location.reload()}).error(function(e,o){var t=JSON.stringify(e.error_messages);layer.show(t)})}}),lvtuanApp.controller("broadcastviewCtrl",function(e,o,t,n,a){o.get("http://"+n.hostName+"/microblog/"+a.id+"/view",{cache:!0,headers:{"Content-Type":"application/json",Authorization:"bearer "+n.token}}).success(function(o){console.info("广播详情",o.data),e.items=o.data}).error(function(e,o){layer.msg(o),console.info(JSON.stringify(e))})}),lvtuanApp.controller("groupcreateCtrl",function(e,o,t,n,a,r){console.info("创建圈子");var i=1;e.moredata=!0,e.items=[],e.doRefresh=function(){i=1,e.items=[],e.loadMore()},e.loadMore=function(){o.get("http://"+n.hostName+"/group/create?page="+i++,{cache:!0,headers:{"Content-Type":"application/json",Authorization:"bearer "+n.token}}).success(function(o){return o.data.length>0?(o.data.length>9?e.moredata=!0:e.moredata=!1,void(e.items=e.items.concat(o.data))):(layer.show("暂无数据！"),e.moredata=!1,!1)}).error(function(e,o){layer.msg(o),console.info(JSON.stringify(e))})["finally"](function(){e.$broadcast("scroll.refreshComplete"),e.$broadcast("scroll.infiniteScrollComplete")})},Array.prototype.remove=function(e){if(isNaN(e)||e>this.length)return!1;for(var o=0,t=0;o<this.length;o++)this[o]!=this[e]&&(this[t++]=this[o]);this.length-=1},e.selIds=[],e.checkItem=function(o,t){if(0==o){var n;angular.forEach(e.selIds,function(e,o){e==t&&(n=o)}),e.selIds.remove(n,n)}else e.selIds.push(t)},e.createSubmit=function(){var t=e.selIds,a=getParams("#createGroup_form");return""==a.group_name?(layer.show("请输入圈子名称!"),!1):""==a.group_avatar?(layer.show("请上传圈子头像!"),!1):(o.post("http://"+n.hostName+"/group/store",{group_name:a.group_name,group_avatar:a.group_avatar,members:t},{headers:{"Content-Type":"application/json",Authorization:"bearer "+n.token}}).success(function(o){layer.show("创建成功！"),e.selIds={},e.file={},$(":input","#questions_form").not("textarea :submit, :reset, :hidden").val(""),location.href="#/group/list",window.location.reload()}).error(function(e,o){if(400==o){var t=JSON.stringify(e.error_messages.group_name[0]);console.info(t),layer.show(t)}console.info(e),console.info(o);var t=JSON.stringify(e.message);layer.show(t)}),!0)},e.uploadFiles=function(o){o&&e.upload(o)},e.upload=function(o){r.upload({headers:{"Content-Type":"application/json",Authorization:"bearer "+n.token},url:"http://"+n.hostName+"/group/uploadImage",data:{group_avatar:o}}).then(function(o){var t="http://"+n.hostName+"/"+o.data.data;e.file=t,a(function(){e.result=o.data})},function(e){if(e.status>0){var o=e.status+": "+e.data;console.info("errorMsg",o),layer.show(o)}},function(o){var t=parseInt(100*o.loaded/o.total);e.progress=t})}}),lvtuanApp.controller("televisecreateCtrl",function(e,o,t,n,a){console.info("创建广播"),e.createSubmit=function(){var e=getParams("#myForm");return console.info(e),""==e.content?(layer.show("请输入你的广播!"),!1):(o.post("http://"+n.hostName+"/microblog/create",{content:e.content},{headers:{"Content-Type":"application/json",Authorization:"bearer "+n.token}}).success(function(e){layer.show("提交成功！"),$(":input","#myForm").not("textarea :submit, :reset, :hidden").val(""),location.href="#/broadcast/view/"+e.data}).error(function(e,o){var t=JSON.stringify(e.error_messages);layer.show(t)}),!0)}}),lvtuanApp.controller("knowledgesCtrl",function(e,o,t){function n(){var e=layer.getParams("#search_form");a(e)}function a(n){var a="";a+=n.q?"http://"+t.hostName+"/knowledge/article/list_articles?q="+n.q+"&page="+r++:"http://"+t.hostName+"/knowledge/article/list_articles?page="+r++,o.get(a,{cache:!0,headers:{"Content-Type":"application/json",Authorization:"bearer "+t.token}}).success(function(o){console.info("法规",o.data),o.data.length>0?(o.data.length>9?e.moredata=!0:e.moredata=!1,e.knowledges=e.knowledges.concat(o.data)):(e.moredata=!1,layer.show("暂无数据！"))}).error(function(e,o){layer.msg(o),console.info(JSON.stringify(e))})["finally"](function(){e.$broadcast("scroll.refreshComplete"),e.$broadcast("scroll.infiniteScrollComplete")})}var r=1;e.moredata=!0,e.knowledges=[],e.search=function(){r=1,e.knowledges=[],n()},e.doRefresh=function(){r=1,e.knowledges=[],n()},e.loadMore=function(){n()}}),lvtuanApp.controller("documentsCtrl",function(e,o,t){function n(){var e=layer.getParams("#search_form");a(e)}function a(n){var a="";a+=n.q?"http://"+t.hostName+"/knowledge/document/list_documents?q="+n.q+"&page="+r++:"http://"+t.hostName+"/knowledge/document/list_documents?page="+r++,o.get(a,{cache:!0,headers:{"Content-Type":"application/json",Authorization:"bearer "+t.token}}).success(function(o){return console.info("文库",o.data),o.data.length>0?(o.data.length>9?e.moredata=!0:e.moredata=!1,void(e.documents=e.documents.concat(o.data))):(layer.show("暂无数据！"),e.moredata=!1,!1)}).error(function(e,o){layer.msg(o),console.info(JSON.stringify(e))})["finally"](function(){e.$broadcast("scroll.refreshComplete"),e.$broadcast("scroll.infiniteScrollComplete")})}var r=1;e.moredata=!0,e.documents=[],e.search=function(){r=1,e.documents=[],n()},e.doRefresh=function(){r=1,e.documents=[],n()},e.loadMore=function(){n()}}),lvtuanApp.controller("casesCtrl",function(e,o,t){var n=1;e.moredata=!0,e.cases=[],e.doRefresh=function(){n=1,e.cases=[],e.loadMoreCases()},e.loadMore=function(){o.get("http://"+t.hostName+"/case/list_case?page="+n++,{cache:!0,headers:{"Content-Type":"application/json",Authorization:"bearer "+t.token}}).success(function(o){return console.info("案列",o.data),o.data.length>0?(o.data.length>9?e.moredata=!0:e.moredata=!1,void(e.cases=e.cases.concat(o.data))):(layer.show("暂无数据！"),e.moredata=!1,!1)}).error(function(e,o){console.info(JSON.stringify(e)),console.info(JSON.stringify(o))})["finally"](function(){e.$broadcast("scroll.refreshComplete"),e.$broadcast("scroll.infiniteScrollComplete")})}}),lvtuanApp.controller("knowKnowledgesCtrl",function(e,o,t,n,a){function r(){var a="http://"+t.hostName+"/knowledge/article/"+n.id+"/view";o.get(a,{cache:!0,headers:{"Content-Type":"application/json",Authorization:"bearer "+t.token}}).success(function(o){console.info(o.data),e.items=o.data}).error(function(e,o){layer.msg(o),console.info(JSON.stringify(e))})}r()}),lvtuanApp.controller("knowDocumentsCtrl",function(e,o,t,n,a){function r(){var n="http://"+t.hostName+"/knowledge/document/list_documents";o.get(n,{cache:!0,headers:{"Content-Type":"application/json",Authorization:"bearer "+t.token}}).success(function(o){for(var t=o.data,n=0;n<t.length;n++)if(i==t[n].id){e.documen=t[n];break}}).error(function(e,o){layer.msg(o),console.info(JSON.stringify(e))})}var i=a.id;r()}),lvtuanApp.controller("knowCasesCtrl",function(e,o,t,n,a){function r(){var n="http://"+t.hostName+"/case/"+a.id+"/view";o.get(n,{cache:!0,headers:{"Content-Type":"application/json",Authorization:"bearer "+t.token}}).success(function(o){console.info(o.data),e.items=o.data}).error(function(e,o){layer.msg(o),console.info(JSON.stringify(e))})}r()}),lvtuanApp.controller("centerCtrl",function(e,o,t,n,a){1==t.user_group_id||2==t.user_group_id&&0==t.is_verified?o.get("http://"+t.hostName+"/center/customer/info",{cache:!0,headers:{"Content-Type":"application/json",Authorization:"bearer "+t.token}}).success(function(o){return console.info(o.data),o.data?void(e.items=o.data):(layer.show("暂无数据！"),!1)}).error(function(e,o){layer.msg(o),console.info(JSON.stringify(e)),console.info(JSON.stringify(o))}):o.get("http://"+t.hostName+"/center/lawyer/info",{cache:!0,headers:{"Content-Type":"application/json",Authorization:"bearer "+t.token}}).success(function(o){return console.info(o.data),o.data?void(e.items=o.data):(layer.show("暂无数据！"),!1)}).error(function(e,o){layer.msg(o),console.info(JSON.stringify(e))}),e.invitefriend=function(){e.data={};n.show({templateUrl:"popup-invitefriend-template.html",title:"邀请好友",scope:e,buttons:[{text:"Cancel"}]})}}),lvtuanApp.controller("infoCtrl",function(e,o,t,n,a){o.get("http://"+t.hostName+"/center/customer/info",{cache:!0,headers:{"Content-Type":"application/json",Authorization:"bearer "+t.token}}).success(function(o){return console.info(o.data),o.data?void(e.items=o.data):(layer.show("暂无数据！"),!1)}).error(function(e,o){console.info(JSON.stringify(e)),console.info(JSON.stringify(o))}),e.show=function(){n.show({buttons:[{text:"拍照"},{text:"从相册中选择"}],titleText:"请您选择",buttonClicked:function(e){return 0==e?alert("拍照"):alert("从相册中选择"),!0}})},e.show2=function(){n.show({buttons:[{text:"男"},{text:"女"}],titleText:"请您选择",buttonClicked:function(e){return 0==e?alert("男"):alert("女"),!0}})},e.deadline=function(){var o={date:e.todo_date,mode:"date"};datePicker.show(o,function(o){isNaN(o.getTime())||e.$apply(function(){e.todo_date=o})})}}),lvtuanApp.controller("listscoresCtrl",function(e,o){o.bootstrap("/center/score/list_scores",e)}),lvtuanApp.controller("messagesCtrl",function(e,o){o.bootstrap("/letter/sys",e)}),lvtuanApp.controller("viewMessageCtrl",function(e,o,t,n,a){var r=a.id,i="http://"+t.hostName+"/letter/sys-letters/"+r;o.get(i,{cache:!0,headers:{"Content-Type":"application/json",Authorization:"bearer "+t.token}}).success(function(o){e.item=o.data}).error(function(e,o){layer.msg(o),console.info(JSON.stringify(e))})}),lvtuanApp.controller("collectCtrl",function(e,o){o.bootstrap("/center/collect",e)}),lvtuanApp.controller("commentCtrl",function(e,o){o.bootstrap("/center/customer/articles",e)}),lvtuanApp.controller("followedCtrl",function(e,o){o.bootstrap("/center/mylawyer/followed",e)}),lvtuanApp.controller("becomelawyerCtrl",function(e,o,t,n,a,r){function i(){o.get("http://"+t.hostName+"/area/province",{cache:!0,headers:{"Content-Type":"application/json",Authorization:"bearer "+t.token}}).success(function(o){e.provinces=o.data}).error(function(e,o){layer.msg(o),console.info(JSON.stringify(e))})}function s(){o.get("http://"+t.hostName+"/lawyer/workscopes",{cache:!0,headers:{"Content-Type":"application/json",Authorization:"bearer "+t.token}}).success(function(o){e.workscopes_one=o.data,localStorage.setItem("workscopes_one",JSON.stringify(e.workscopes_one))}).error(function(e,o){layer.msg(o),console.info(JSON.stringify(e))})}function l(){o.get("http://"+t.hostName+"/lawyer/practiseperiods",{cache:!0,headers:{"Content-Type":"application/json",Authorization:"bearer "+t.token}}).success(function(o){e.periods=o.data}).error(function(e,o){layer.msg(o),console.info(JSON.stringify(e))})}i(),s(),l(),e.sexs=[{key:"male",value:"男"},{key:"female",value:"女"}],e.positions=[{key:"junior_lawyer",value:"律师"},{key:"senior_lawyer",value:"高级律师"},{key:"partner",value:"合伙人"}],e.getCity=function(n){o.get("http://"+t.hostName+"/area/"+n+"/city",{cache:!0,headers:{"Content-Type":"application/json",Authorization:"bearer "+t.token}}).success(function(o){e.citys=o.data}).error(function(e,o){layer.msg(o),console.info(JSON.stringify(e))})},e.getDistrict=function(n){o.get("http://"+t.hostName+"/area/"+n+"/district",{cache:!0,headers:{"Content-Type":"application/json",Authorization:"bearer "+t.token}}).success(function(o){e.districts=o.data}).error(function(e,o){layer.msg(o),console.info(JSON.stringify(e))})},Array.prototype.remove=function(e){if(isNaN(e)||e>this.length)return!1;for(var o=0,t=0;o<this.length;o++)this[o]!=this[e]&&(this[t++]=this[o]);this.length-=1},e.get_work_scope=[],e.getworkscopes_one=function(o){if(e.get_work_scope.push(o),localStorage.setItem("get_work_scope",JSON.stringify(e.get_work_scope)),e.workscopes_two=JSON.parse(localStorage.getItem("workscopes_one")),o){var t;angular.forEach(e.workscopes_two,function(e,n){e.key==o&&(t=n)}),e.workscopes_two.remove(t),e.workscopes_two=e.workscopes_two,localStorage.setItem("workscopes_two",JSON.stringify(e.workscopes_two))}},e.getworkscopes_two=function(o){if(e.get_work_scope.push(o),localStorage.setItem("get_work_scope",JSON.stringify(e.get_work_scope)),e.workscopes_three=JSON.parse(localStorage.getItem("workscopes_two")),o){var t;angular.forEach(e.workscopes_three,function(e,n){e.key==o&&(t=n)}),e.workscopes_three.remove(t),e.workscopes_three=e.workscopes_three}},e.getworkscopes_three=function(o){e.get_work_scope.push(o),localStorage.setItem("get_work_scope",JSON.stringify(e.get_work_scope))},e.uploadFiles=function(o,n){r.upload({headers:{"Content-Type":"application/json",Authorization:"bearer "+t.token},url:"http://"+t.hostName+"/file/upload/user",data:{upload_file:o,user_id:t.user_id}}).then(function(o){var r="http://"+t.hostName+"/"+o.data.data.file_path;1==n&&(e.file_1=r),2==n&&(e.file_2=r),3==n&&(e.file_3=r),a(function(){e.result=o.data})},function(e){if(e.status>0){var o=e.status+": "+e.data;1==n&&(console.info("errorMsg_1",o),layer.show(o)),2==n&&(console.info("errorMsg_2",o),layer.show(o)),3==n&&(console.info("errorMsg_3",o),layer.show(o))}},function(o){var t=parseInt(100*o.loaded/o.total);1==n&&(e.progress_1=t),2==n&&(e.progress_2=t),3==n&&(e.progress_3=t)})},e.user={},e.submit=function(){return e.user=layer.getParams("#myForm"),e.user.license_file.length<1?(layer.show("请选择执业证书！"),!1):e.user.avatar.length<1?(layer.show("请选择个人头像图片！"),!1):e.user.bg_image.length<1?(layer.show("请选择背景图片！"),!1):(e.get_work_scope=JSON.parse(localStorage.getItem("get_work_scope")),e.get_work_scope&&(e.user.work_scope=e.get_work_scope),console.info(e.user),void o.post("http://"+t.hostName+"/center/become_lawyer",e.user,{headers:{"Content-Type":"application/json",Authorization:"bearer "+t.token}}).success(function(o){console.info(o.data);var t=o.data;e.user_group_id=t.user.user_group_id,e.is_verified=t.user.is_verified,localStorage.removeItem("user_group_id"),localStorage.removeItem("is_verified"),localStorage.setItem("user_group_id",JSON.stringify(e.user_group_id)),localStorage.setItem("is_verified",JSON.stringify(e.is_verified)),e.user={},e.file_1={},e.file_2={},e.file_3={},e.progress_1={},e.progress_2={},e.progress_3={},localStorage.removeItem("workscopes_one"),localStorage.removeItem("workscopes_two"),localStorage.removeItem("get_work_scope"),layer.show("提交成功！"),location.href="#/index",window.location.reload()}).error(function(e,o){console.info(e.error_messages),console.info(JSON.stringify(e.message));var t=JSON.stringify(e.error_messages);layer.show(t),console.info(t),layer.show(t)}))}}),lvtuanApp.controller("infolawyerCtrl",function(e,o,t){console.info("个人资料")}),lvtuanApp.controller("followedlaywerCtrl",function(e,o){o.bootstrap("/center/lawyer/customer/followed",e)}),lvtuanApp.controller("listscoreslaywerCtrl",function(e,o){o.bootstrap("/center/lawyer/score/list_scores",e)}),lvtuanApp.controller("commentlaywerCtrl",function(e,o,t,n){console.info("律师的评论");var a=1;e.moredata=!0,e.items=[],e.doRefresh=function(){a=1,e.items=[],e.loadMore()},e.loadMore=function(){o.get("http://"+t.hostName+"/lawyer/"+n.id+"/evaluations?page="+a,{cache:!0,headers:{"Content-Type":"application/json",Authorization:"bearer "+t.token}}).success(function(o){if(o.data.length>0){o.data.length>9?e.moredata=!0:e.moredata=!1,e.items=o.data,e.ratingVal=[];for(var t=0;t<e.items.length;t++)e.ratingVal.push(e.items[t].evaluate_score);return!0}return layer.show("暂无数据！"),e.moredata=!1,!1}).error(function(e,o){console.info(JSON.stringify(e)),console.info(JSON.stringify(o))})},e.max=10,e.readonly=!0,e.onHover=function(o){e.hoverVal=o},e.onLeave=function(){e.hoverVal=null},e.onChange=function(o){e.ratingVal=o}}),lvtuanApp.directive("star",function(){return{template:'<ul class="rating" ng-mouseleave="leave()"><li ng-repeat="star in stars" ng-class="star" ng-click="click($index + 1)" ng-mouseover="over($index + 1)">★</li></ul>',scope:{ratingValue:"=",max:"=",readonly:"@",onHover:"=",onLeave:"="},controller:function(e){e.ratingValue=e.ratingValue||0,e.max=e.max||5,e.click=function(o){e.readonly&&"true"===e.readonly||(e.ratingValue=o)},e.over=function(o){e.onHover(o)},e.leave=function(){e.onLeave()}},link:function(e,o,t){var n=function(){e.stars=[];for(var o=0;o<e.max;o++)e.stars.push({filled:o<e.ratingValue})};n(),e.$watch("ratingValue",function(e,o){o&&n()}),e.$watch("max",function(e,o){o&&n()})}}}),lvtuanApp.controller("caselaywerCtrl",function(e,o,t){o.bootstrap("/center/lawyer/blog/list?class="+t["class"],e)}),lvtuanApp.controller("viewarticlelawyerCtrl",function(e,o,t,n,a,r,i){function s(){a.show(),o.get("http://"+t.hostName+"/center/lawer/blog/"+n.id+"/blogview",{cache:!0,headers:{"Content-Type":"application/json",Authorization:"bearer "+t.token}}).success(function(o){return console.info(o.data),o.data?(r(function(){a.hide(),e.items=o.data}),!0):(layer.show("暂无数据！"),!1)}).error(function(e,o){console.info(JSON.stringify(e)),console.info(JSON.stringify(o))})}s()}),lvtuanApp.controller("aboutCtrl",function(e,o,t){e.showPopup=function(){e.data={};var n=t.show({template:'<input type="password" ng-model="data.wifi">',title:"Enter Wi-Fi Password",subTitle:"Please use normal things",scope:e,buttons:[{text:"Cancel"},{text:"<b>Save</b>",type:"button-positive",onTap:function(o){return e.data.wifi?e.data.wifi:void o.preventDefault()}}]});n.then(function(e){console.log("Tapped!",e)}),o(function(){n.close()},3e3)},e.showConfirm=function(){var e=t.confirm({title:"温馨提示",template:"系统检测到有最新版本，点击确定进行下载。"});e.then(function(e){e?console.log("You are sure"):console.log("You are not sure")})},e.showAlert=function(){var e=t.alert({title:"温馨提示",template:"您的软件已经是最新版本！"});e.then(function(e){console.log("Thank you for not eating my delicious ice cream cone")})}}),lvtuanApp.controller("siteCtrl",function(e,o,t){console.info("设置"),e.logout=function(){localStorage.removeItem("token"),localStorage.removeItem("user_group_id"),localStorage.removeItem("is_verified"),localStorage.removeItem("user_id"),location.href="#/login",window.location.reload()}}),lvtuanApp.controller("lawyerlistCtrl",function(e,o,t,n){function a(){t.get("http://"+n.hostName+"/lawyer/cities",{cache:!0,headers:{"Content-Type":"application/json",Authorization:"bearer "+n.token}}).success(function(o){e.cities=o.data}).error(function(e,o){layer.msg(o),console.info(JSON.stringify(e))})}function r(){t.get("http://"+n.hostName+"/lawyer/workscopes",{cache:!0,headers:{"Content-Type":"application/json",Authorization:"bearer "+n.token}}).success(function(o){e.workscopes=o.data}).error(function(e,o){layer.msg(o),console.info(JSON.stringify(e))})}function i(){t.get("http://"+n.hostName+"/lawyer/practiseperiods",{cache:!0,headers:{"Content-Type":"application/json",Authorization:"bearer "+n.token}}).success(function(o){console.info(o.data),e.periods=o.data}).error(function(e,o){layer.msg(o),console.info(JSON.stringify(e))})}function s(){var e=layer.getParams("#searchForm"),o=[];e.q&&o.push("q="+e.q),e.city_id&&o.push("city_id="+e.city_id),e.cat_id&&o.push("cat_id="+e.cat_id),e.experience&&o.push("experience="+e.experience),e.order_by&&o.push("order_by="+e.order_by),o=o.join("&"),console.info(o),l(o)}function l(o){var a;a=""!=o?"http://"+n.hostName+"/lawyer/list_lawyers?"+o+"&page="+c:"http://"+n.hostName+"/lawyer/list_lawyers?page="+c,console.info(a),t.get(a,{cache:!0,headers:{"Content-Type":"application/json",Authorization:"bearer "+n.token}}).success(function(o){return console.info(o.data),o.data.length>0?(e.moredata=!0,e.items=e.items.concat(o.data),void c++):(layer.show("暂无数据！"),e.moredata=!1,!1)}).error(function(e,o){
layer.msg(o),console.info(JSON.stringify(e))})["finally"](function(){e.$broadcast("scroll.refreshComplete"),e.$broadcast("scroll.infiniteScrollComplete")})}e.orders=[{key:"",value:"离我最近"},{key:"most_popular",value:"人气最高"},{key:"best_evaluated",value:"评价最好"}],a(),r(),i();var c=1;e.moredata=!0,e.items=[],e.search=function(o){localStorage.removeItem("items"),localStorage.removeItem("q"),c=1,e.items=[],s(),layer.stopDefault(o)},e.searchCity=function(){c=1,e.items=[],s()},e.searchCat=function(){c=1,e.items=[],s()},e.doRefresh=function(){c=1,e.items=[],s()},e.loadMore=function(){s()}}),lvtuanApp.controller("viewCtrl",function(e,o,t,n,a,r,i){function s(){var o="http://"+n.hostName+"/lawyer/"+a.id;t.get(o,{cache:!0,headers:{"Content-Type":"application/json",Authorization:"bearer "+n.token}}).success(function(o){console.info(o.data),e.items=o.data}).error(function(e,o){layer.msg(o),console.info(JSON.stringify(e))})}e.tabs=[{title:"个人介绍",url:"selfintro.tpl.html"},{title:"评价",url:"evaluate.tpl.html"},{title:"文章",url:"article.tpl.html"},{title:"广播",url:"televise.tpl.html"}],e.currentTab="selfintro.tpl.html",e.onClickTab=function(o){e.currentTab=o.url},e.isActiveTab=function(o){return o==e.currentTab},s(),e.showConfirm=function(){var e=r.confirm({title:"温馨提示",template:"系统检测到有最新版本，点击确定进行下载。"});e.then(function(e){e?console.log("You are sure"):console.log("You are not sure")})},e.showAlert=function(){var e=r.alert({title:"温馨提示",template:"您的软件已经是最新版本！"});e.then(function(e){console.log("Thank you for not eating my delicious ice cream cone")})}}),lvtuanApp.controller("viewevaluateCtrl",function(e,o,t,n){function a(){var a="http://"+t.hostName+"/lawyer/"+n.id+"/articles?page="+r;o.get(a,{cache:!0,headers:{"Content-Type":"application/json",Authorization:"bearer "+t.token}}).success(function(o){return o.data.length>0?(e.moredata=!0,e.evaluations=e.evaluations.concat(o.data),void r++):(layer.show("暂无数据！"),e.moredata=!1,!1)}).error(function(e,o){layer.msg(o),console.info(JSON.stringify(e))})["finally"](function(){e.$broadcast("scroll.refreshComplete"),e.$broadcast("scroll.infiniteScrollComplete")})}console.info("律师评价");var r=1;e.moredata=!0,e.evaluations=[],e.doRefresh=function(){r=1,e.evaluations=[],e.loadMore()},e.loadMore=function(){a()},e.$on("$stateChangeSuccess",function(){e.loadMore()})}),lvtuanApp.controller("viewarticleCtrl",function(e,o,t,n){function a(){var a="http://"+t.hostName+"/lawyer/"+n.id+"/articles?page="+r;o.get(a,{cache:!0,headers:{"Content-Type":"application/json",Authorization:"bearer "+t.token}}).success(function(o){return o.data.length>0?(e.moredata=!0,e.articles=e.articles.concat(o.data),void r++):(layer.show("暂无数据！"),e.moredata=!1,!1)}).error(function(e,o){layer.msg(o),console.info(JSON.stringify(e))})["finally"](function(){e.$broadcast("scroll.refreshComplete"),e.$broadcast("scroll.infiniteScrollComplete")})}console.info("律师文章");var r=1;e.moredata=!0,e.articles=[],e.doRefresh=function(){r=1,e.articles=[],e.loadMore()},e.loadMore=function(){a()},e.$on("$stateChangeSuccess",function(){e.loadMore()})}),lvtuanApp.controller("viewteleviseCtrl",function(e,o,t){console.info("律师广播");var n=1;e.moredata=!0,e.televise=[],e.doRefresh=function(){n=1,e.televise=[],e.loadMore()},e.loadMore=function(){o.get("http://"+t.hostName+"/microblog/list/mine?page="+n,{cache:!0,headers:{"Content-Type":"application/json",Authorization:"bearer "+t.token}}).success(function(o){return console.info("广播",o.data),o.data.length>0?(o.data.length>9?e.moredata=!0:e.moredata=!1,e.televise=e.televise.concat(o.data),void n++):(layer.show("暂无数据！"),e.moredata=!1,!1)}).error(function(e,o){layer.msg(o),console.info(JSON.stringify(e))})["finally"](function(){e.$broadcast("scroll.refreshComplete"),e.$broadcast("scroll.infiniteScrollComplete")})},e.$on("$stateChangeSuccess",function(){e.loadMore()})}),lvtuanApp.controller("graphicCtrl",function(e,o,t){console.info("图文咨询")}),lvtuanApp.controller("specialCtrl",function(e,o,t){console.info("专业咨询")}),lvtuanApp.controller("questionsCtrl",function(e,o,t,n){function a(){t.get("http://"+n.hostName+"/question/list_questions?page="+r,{cache:!0,headers:{"Content-Type":"application/json",Authorization:"bearer "+n.token}}).success(function(o){return o.data.length>0?(e.moredata=!0,console.info(o.data),e.list_questions=e.list_questions.concat(o.data),e.$broadcast("scroll.infiniteScrollComplete"),void r++):(e.moredata=!1,e.$broadcast("scroll.infiniteScrollComplete"),layer.show("暂无数据！"),!1)}).error(function(e,o){layer.msg(o),console.info(JSON.stringify(e))})}var r=1;e.moredata=!0,e.list_questions=[],t.get("http://"+n.hostName+"/lawyer/workscopes",{cache:!0,headers:{"Content-Type":"application/json",Authorization:"bearer "+n.token}}).success(function(o){o.data?e.workscopes=o.data:layer.show("暂无数据！")}).error(function(e,o){console.info(JSON.stringify(e)),console.info(JSON.stringify(o))}),e.user={},e.submit=function(o){console.info(e.user),t.post("http://"+n.hostName+"/question/create",e.user,{headers:{"Content-Type":"application/json",Authorization:"bearer "+n.token}}).success(function(o){return console.info(o.data),r=1,e.list_questions=[],o.data?(e.moredata=!0,e.list_questions=e.list_questions.concat(o.data),e.$broadcast("scroll.infiniteScrollComplete"),layer.show("提交成功！"),void(e.user={})):(e.moredata=!1,e.$broadcast("scroll.infiniteScrollComplete"),layer.show("暂无数据！"),!1)}).error(function(e,o){console.info(e.error_messages);var t=JSON.stringify(e.error_messages.content[0]);layer.show(t)})},localStorage.removeItem("q"),e.search=function(){var e=$.trim($(".search").val());localStorage.setItem("q",JSON.stringify(e)),o.go("questionslist",{q:e},{reload:!0})},e.loadMore=function(){a()}}),lvtuanApp.controller("questionslistCtrl",function(e,o,t,n,a){var r=JSON.parse(localStorage.getItem("q"));console.info(r),angular.element(".searchq").val(r);var i=1;o.moredata=!0,o.items=[],o.search=function(){localStorage.removeItem("q"),i=1,o.items=[],r=angular.element(".searchq").val(),o.loadMore()},o.doRefresh=function(){i=1,o.items=[],o.loadMore()},o.loadMore=function(){var t="";t=""==r||null==r?"http://"+n.hostName+"/question/list_questions?page="+i:"http://"+n.hostName+"/question/list_questions?q="+r+"&page="+i,e.get(t,{cache:!0,headers:{"Content-Type":"application/json",Authorization:"bearer "+n.token}}).success(function(e){return e.data.length>0?(e.data.length>9?o.moredata=!0:o.moredata=!1,o.items=o.items.concat(e.data),void i++):(layer.show("暂无数据！"),o.moredata=!1,!1)}).error(function(e,o){layer.msg(o),console.info(JSON.stringify(e))})["finally"](function(){o.$broadcast("scroll.refreshComplete"),o.$broadcast("scroll.infiniteScrollComplete")})},o.$on("$stateChangeSuccess",function(){o.loadMore()})}),lvtuanApp.controller("questionsviewsCtrl",function(e,o,t,n,a){function r(){var t="http://"+n.hostName+"/question/"+a.id;e.get(t,{cache:!0,headers:{"Content-Type":"application/json",Authorization:"bearer "+n.token}}).success(function(e){console.info(e.data),o.items=e.data}).error(function(e,o){layer.msg(o),console.info(JSON.stringify(e))})}r()}),lvtuanApp.controller("legaladviceCtrl",function(e,o,t){function n(){var e=layer.getParams("#search_form");a(e)}function a(n){var a="";a+=n.q?"http://"+t.hostName+"/knowledge/article/list_articles?q="+n.q+"&page="+r++:"http://"+t.hostName+"/knowledge/article/list_articles?page="+r++,e.get(a,{cache:!0,headers:{"Content-Type":"application/json",Authorization:"bearer "+t.token}}).success(function(e){return console.info("法规",e.data),e.data.length>0?(e.data.length>9?o.moredata=!0:o.moredata=!1,void(o.knowledges=o.knowledges.concat(e.data))):(layer.show("暂无数据！"),o.moredata=!1,!1)}).error(function(e,o){layer.msg(o),console.info(JSON.stringify(e))})["finally"](function(){o.$broadcast("scroll.refreshComplete"),o.$broadcast("scroll.infiniteScrollComplete")})}var r=1;o.moredata=!0,o.knowledges=[],o.search=function(){r=1,o.knowledges=[],n()},o.doRefresh=function(){r=1,o.knowledges=[],n()},o.loadMore=function(){n()}}),lvtuanApp.controller("lawlectureCtrl",function(e,o,t,n){console.info("法律讲堂")}),lvtuanApp.controller("casescommCtrl",function(e,o,t,n){console.info("案件委托")}),lvtuanApp.controller("lvtuanallianceCtrl",function(e,o,t,n){function a(){var t="http://"+n.hostName+"/union/list_partners";e.get(t,{cache:!0,headers:{"Content-Type":"application/json",Authorization:"bearer "+n.token}}).success(function(e){o.unions=e.data}).error(function(e,o){layer.msg(o),console.info(JSON.stringify(e))})}a()}),lvtuanApp.controller("lvtuanallianceviewCtrl",function(e,o,t,n,a){function r(){var t="http://"+n.hostName+"/union/list_partners";e.get(t,{cache:!0,headers:{"Content-Type":"application/json",Authorization:"bearer "+n.token}}).success(function(e){for(var t=e.data,n=0;n<t.length;n++)if(i==t[n].id){o.union=t[n];break}}).error(function(e,o){layer.msg(o),console.info(JSON.stringify(e))})}var i=a.id;r()}),lvtuanApp.controller("talentCtrl",function(e,o,t,n){function a(){var t="http://"+n.hostName+"/hr/list_positions";e.get(t,{cache:!0,headers:{"Content-Type":"application/json",Authorization:"bearer "+n.token}}).success(function(e){o.positions=e.data,console.info(o.positions)}).error(function(e,o){layer.msg(o),console.info(JSON.stringify(e))})}a()}),lvtuanApp.controller("talentviewCtrl",function(e,o,t,n,a){function r(){var t="http://"+n.hostName+"/hr/"+a.id+"/view";e.get(t,{cache:!0,headers:{"Content-Type":"application/json",Authorization:"bearer "+n.token}}).success(function(e){o.positions=e.data,console.info(o.positions)}).error(function(e,o){layer.msg(o),console.info(JSON.stringify(e))})}r()}),lvtuanApp.controller("workbenchLawyerCtrl",function(e,o,t,n){e.get("http://"+n.hostName+"/center/lawyer/info",{cache:!0,headers:{"Content-Type":"application/json",Authorization:"bearer "+n.token}}).success(function(e){return console.info(e.data),e.data?void(o.items=e.data):(layer.show("暂无数据！"),!1)}).error(function(e,o){console.info(JSON.stringify(e)),console.info(JSON.stringify(o))})}),lvtuanApp.controller("orderAllCtrl",function(e,o,t,n){var a=1;o.moredata=!0,o.items=[],o.doRefresh=function(){a=1,o.items=[],o.loadMore()},o.loadMore=function(){e.get("http://"+n.hostName+"/center/pay/lawyer/question/all?page="+a++,{cache:!0,headers:{"Content-Type":"application/json",Authorization:"bearer "+n.token}}).success(function(e){return console.info("律师订单全部",e.data),e.data.length>0?(e.data.length>9?o.moredata=!0:o.moredata=!1,o.items=e.data,console.info(o.items),!0):(o.moredata=!1,layer.show("暂无数据！"),!1)}).error(function(e,o){console.info(JSON.stringify(e)),console.info(JSON.stringify(o))})}}),lvtuanApp.controller("orderPendingCtrl",function(e,o,t,n){var a=1;o.moredata=!0,o.items=[],o.doRefresh=function(){a=1,o.items=[],o.loadMore()},o.loadMore=function(){e.get("http://"+n.hostName+"/center/pay/lawyer/question/new?page="+a++,{cache:!0,headers:{"Content-Type":"application/json",Authorization:"bearer "+n.token}}).success(function(e){return console.info("待受理",e.data),e.data.length>0?(e.data.length>9?o.moredata=!0:o.moredata=!1,o.items=e.data,console.info(o.items),!0):(o.moredata=!1,layer.show("暂无数据！"),!1)}).error(function(e,o){console.info(JSON.stringify(e)),console.info(JSON.stringify(o))})}}),lvtuanApp.controller("orderRepliedCtrl",function(e,o,t,n){var a=1;o.moredata=!0,o.items=[],o.doRefresh=function(){a=1,o.items=[],o.loadMore()},o.loadMore=function(){e.get("http://"+n.hostName+"/center/pay/lawyer/question/replied?page="+a++,{cache:!0,headers:{"Content-Type":"application/json",Authorization:"bearer "+n.token}}).success(function(e){return console.info("待确认",e.data),e.data.length>0?(e.data.length>9?o.moredata=!0:o.moredata=!1,o.items=e.data,console.info(o.items),!0):(o.moredata=!1,layer.show("暂无数据！"),!1)}).error(function(e,o){console.info(JSON.stringify(e)),console.info(JSON.stringify(o))})}}),lvtuanApp.controller("orderCompletedCtrl",function(e,o,t,n){var a=1;o.moredata=!0,o.items=[],o.doRefresh=function(){a=1,o.items=[],o.loadMore()},o.loadMore=function(){e.get("http://"+n.hostName+"/center/pay/lawyer/question/complete?page="+a++,{cache:!0,headers:{"Content-Type":"application/json",Authorization:"bearer "+n.token}}).success(function(e){return console.info("已完成",e.data),e.data.length>0?(e.data.length>9?o.moredata=!0:o.moredata=!1,o.items=e.data,console.info(o.items),!0):(o.moredata=!1,layer.show("暂无数据！"),!1)}).error(function(e,o){layer.msg(o),console.info(JSON.stringify(e))})}}),lvtuanApp.controller("lawyerquestionNewCtrl",function(e,o,t,n){console.info("全部");var a=1;o.moredata=!0,o.items=[],o.doRefresh=function(){a=1,o.items=[],o.loadMore()},o.loadMore=function(){e.get("http://"+n.hostName+"/center/lawyer/question/all?page="+a++,{cache:!0,headers:{"Content-Type":"application/json",Authorization:"bearer "+n.token}}).success(function(e){return console.info("全部",e.data),e.data.length>0?(e.data.length>9?o.moredata=!0:o.moredata=!1,o.items=e.data,console.info(o.items),!0):(o.moredata=!1,layer.show("暂无数据！"),!1)}).error(function(e,o){layer.msg(o),console.info(JSON.stringify(e))})}}),lvtuanApp.controller("lawyerquestionSsignedCtrl",function(e,o,t,n){console.info("待受理");var a=1;o.moredata=!0,o.items=[],o.doRefresh=function(){a=1,o.items=[],o.loadMore()},o.loadMore=function(){e.get("http://"+n.hostName+"/center/lawyer/question/new?page="+a++,{cache:!0,headers:{"Content-Type":"application/json",Authorization:"bearer "+n.token}}).success(function(e){return console.info("待受理",e.data),e.data.length>0?(e.data.length>9?o.moredata=!0:o.moredata=!1,o.items=e.data,!0):(o.moredata=!1,layer.show("暂无数据！"),!1)}).error(function(e,o){layer.msg(o),console.info(JSON.stringify(e))})}}),lvtuanApp.controller("lawyerquestionRepliedCtrl",function(e,o,t,n){console.info("待确认");var a=1;o.moredata=!0,o.items=[],o.doRefresh=function(){a=1,o.items=[],o.loadMore()},o.loadMore=function(){e.get("http://"+n.hostName+"/center/lawyer/question/replied?page="+a++,{cache:!0,headers:{"Content-Type":"application/json",Authorization:"bearer "+n.token}}).success(function(e){return console.info("待确认",e.data),e.data.length>0?(e.data.length>9?o.moredata=!0:o.moredata=!1,o.items=e.data,console.info(o.items),!0):(o.moredata=!1,layer.show("暂无数据！"),!1)}).error(function(e,o){layer.msg(o),console.info(JSON.stringify(e))})}}),lvtuanApp.controller("lawyerquestionCompleteCtrl",function(e,o,t,n){console.info("已完成");var a=1;o.moredata=!0,o.items=[],o.doRefresh=function(){a=1,o.items=[],o.loadMore()},o.loadMore=function(){e.get("http://"+n.hostName+"/center/lawyer/question/complete?page="+a++,{cache:!0,headers:{"Content-Type":"application/json",Authorization:"bearer "+n.token}}).success(function(e){return console.info("已完成",e.data),e.data.length>0?(e.data.length>9?o.moredata=!0:o.moredata=!1,o.items=e.data,console.info(o.items),!0):(o.moredata=!1,layer.show("暂无数据！"),!1)}).error(function(e,o){layer.msg(o),console.info(JSON.stringify(e))})}}),lvtuanApp.controller("userlvtuanCtrl",function(e,o,t,n){console.info("律师的律团")}),lvtuanApp.controller("questionNewCtrl",function(e,o,t,n){var a=1;o.moredata=!0,o.items=[],o.doRefresh=function(){a=1,o.items=[],o.loadMore()},o.loadMore=function(){e.get("http://"+n.hostName+"/center/question/all?page="+a++,{cache:!0,headers:{"Content-Type":"application/json",Authorization:"bearer "+n.token}}).success(function(e){return console.info("全部",e.data),e.data.length>0?(e.data.length>9?o.moredata=!0:o.moredata=!1,o.items=e.data,console.info(o.items),!0):(o.moredata=!1,layer.show("暂无数据！"),!1)}).error(function(e,o){layer.msg(o),console.info(JSON.stringify(e))})}}),lvtuanApp.controller("questionSsignedCtrl",function(e,o,t,n){console.info("待受理");var a=1;o.moredata=!0,o.items=[],o.doRefresh=function(){a=1,o.items=[],o.loadMore()},o.loadMore=function(){e.get("http://"+n.hostName+"/center/question/new?page="+a++,{cache:!0,headers:{"Content-Type":"application/json",Authorization:"bearer "+n.token}}).success(function(e){return console.info("待受理",e.data),e.data.length>0?(e.data.length>9?o.moredata=!0:o.moredata=!1,o.items=e.data,console.info(o.items),!0):(o.moredata=!1,layer.show("暂无数据！"),!1)}).error(function(e,o){layer.msg(o),console.info(JSON.stringify(e))})}}),lvtuanApp.controller("questionRepliedCtrl",function(e,o,t,n){console.info("待确认");var a=1;o.moredata=!0,o.items=[],o.doRefresh=function(){a=1,o.items=[],o.loadMore()},o.loadMore=function(){e.get("http://"+n.hostName+"/center/question/replied?page="+a++,{cache:!0,headers:{"Content-Type":"application/json",Authorization:"bearer "+n.token}}).success(function(e){return console.info("待确认",e.data),e.data.length>0?(e.data.length>9?o.moredata=!0:o.moredata=!1,o.items=e.data,console.info(o.items),!0):(o.moredata=!1,layer.show("暂无数据！"),!1)}).error(function(e,o){layer.msg(o),console.info(JSON.stringify(e))})}}),lvtuanApp.controller("questionWaitforconfirmationCtrl",function(e,o,t,n){console.info("待评价");var a=1;o.moredata=!0,o.items=[],o.doRefresh=function(){a=1,o.items=[],o.loadMore()},o.loadMore=function(){e.get("http://"+n.hostName+"/center/question/waitforevaluation?page="+a++,{cache:!0,headers:{"Content-Type":"application/json",Authorization:"bearer "+n.token}}).success(function(e){return console.info("待评价",e.data),e.data.length>0?(e.data.length>9?o.moredata=!0:o.moredata=!1,o.items=e.data,console.info(o.items),!0):(o.moredata=!1,layer.show("暂无数据！"),!1)}).error(function(e,o){layer.msg(o),console.info(JSON.stringify(e))})}}),lvtuanApp.controller("userorderAllCtrl",function(e,o,t,n){var a=1;o.moredata=!0,o.items=[],o.doRefresh=function(){a=1,o.items=[],o.loadMore()},o.loadMore=function(){e.get("http://"+n.hostName+"/center/pay/question/all?page="+a++,{cache:!0,headers:{"Content-Type":"application/json",Authorization:"bearer "+n.token}}).success(function(e){return console.info("用户订单全部",e.data),e.data.length>0?(e.data.length>9?o.moredata=!0:o.moredata=!1,o.items=e.data,console.info(o.items),!0):(o.moredata=!1,layer.show("暂无数据！"),!1)}).error(function(e,o){layer.msg(o),console.info(JSON.stringify(e))})}}),lvtuanApp.controller("userorderPendingCtrl",function(e,o,t,n){var a=1;o.moredata=!0,o.items=[],o.doRefresh=function(){a=1,o.items=[],o.loadMore()},o.loadMore=function(){e.get("http://"+n.hostName+"/center/pay/question/waitpay?page="+a++,{cache:!0,headers:{"Content-Type":"application/json",Authorization:"bearer "+n.token}}).success(function(e){return console.info("待付款",e.data),e.data.length>0?(e.data.length>9?o.moredata=!0:o.moredata=!1,o.items=e.data,console.info(o.items),!0):(o.moredata=!1,layer.show("暂无数据！"),!1)}).error(function(e,o){layer.msg(o),console.info(JSON.stringify(e))})}}),lvtuanApp.controller("userorderRepliedCtrl",function(e,o,t,n){var a=1;o.moredata=!0,o.items=[],o.doRefresh=function(){a=1,o.items=[],o.loadMore()},o.loadMore=function(){e.get("http://"+n.hostName+"/center/pay/question/new?page="+a++,{cache:!0,headers:{"Content-Type":"application/json",Authorization:"bearer "+n.token}}).success(function(e){return console.info("待受理",e.data),e.data.length>0?(e.data.length>9?o.moredata=!0:o.moredata=!1,o.items=e.data,console.info(o.items),!0):(o.moredata=!1,layer.show("暂无数据！"),!1)}).error(function(e,o){layer.msg(o),console.info(JSON.stringify(e))})}}),lvtuanApp.controller("userorderCompletedCtrl",function(e,o,t,n){var a=1;o.moredata=!0,o.items=[],o.doRefresh=function(){a=1,o.items=[],o.loadMore()},o.loadMore=function(){e.get("http://"+n.hostName+"/center/pay/question/replied?page="+a++,{cache:!0,headers:{"Content-Type":"application/json",Authorization:"bearer "+n.token}}).success(function(e){return console.info("待确认",e.data),e.data.length>0?(e.data.length>9?o.moredata=!0:o.moredata=!1,o.items=e.data,console.info(o.items),!0):(o.moredata=!1,layer.show("暂无数据！"),!1)}).error(function(e,o){layer.msg(o),console.info(JSON.stringify(e))})}}),lvtuanApp.controller("userorderTimeoutCtrl",function(e,o,t,n,a){console.info("待评价");var r=1;o.moredata=!0,o.items=[],o.doRefresh=function(){r=1,o.items=[],o.loadMore()},o.loadMore=function(){e.get("http://"+n.hostName+"/center/pay/question/waitforevaluation?page="+r++,{cache:!0,headers:{"Content-Type":"application/json",Authorization:"bearer "+n.token}}).success(function(e){return console.info("待评价",e.data),e.data.length>0?(e.data.length>9?o.moredata=!0:o.moredata=!1,o.items=e.data,console.info(o.items),!0):(o.moredata=!1,layer.show("暂无数据！"),!1)}).error(function(e,o){layer.msg(o),console.info(JSON.stringify(e))})}}),lvtuanApp.controller("userOrderDetailCtrl",function(e,o,t,n,a,r){function i(e){return 10>e&&(e="0"+e),e}e.get("http://"+n.hostName+"/order/"+a.id+"/detail",{cache:!0,headers:{"Content-Type":"application/json",Authorization:"bearer "+n.token}}).success(function(e){return console.info("订单详情",e.data),e.data.length>0?(o.items=e.data,console.info(o.items),!0):(layer.show("暂无数据！"),!1)}).error(function(e,o){layer.msg(o),console.info(JSON.stringify(e))});var s;o.expiresHours=JSON.parse(localStorage.getItem("times")),0==o.expiresHours?o.times=28800:o.times=o.expiresHours,o.starTime=function(){s=r(function(){if(o.times>0){var e=Math.floor(o.times/60/60),t=Math.floor(o.times%60);mm=i(mm),t=i(t),o.t=e+":"+mm+":"+t,o.times-=1,localStorage.setItem("times",o.times)}else o.stopTime(),localStorage.removeItem("times")},1e3)},o.stopTime=function(){angular.isDefined(s)&&(r.cancel(s),s=void 0)},o.starTime(),o.$on("$destroy",function(){o.stopTime()})}),lvtuanApp.controller("documentlistCtrl",function(e,o,t,n,a){function r(){var e=layer.getParams("#search_form");console.info(e);var o=[];e.q&&o.push("q="+e.q),e.cat_id&&o.push("cat_id="+e.cat_id),o=o.join("&"),console.info(o),i(o)}function i(t){var a="";a+=t?"http://"+n.hostName+"/knowledge/document/list_documents?"+t+"&page="+s++:"http://"+n.hostName+"/knowledge/document/list_documents?page="+s++,e.get(a,{cache:!0,headers:{"Content-Type":"application/json",Authorization:"bearer "+n.token}}).success(function(e){return console.info("文库",e.data),e.data.length>0?(e.data.length>9?o.moredata=!0:o.moredata=!1,void(o.items=o.items.concat(e.data))):(layer.show("暂无数据！"),o.moredata=!1,!1)}).error(function(e,o){layer.msg(o),console.info(JSON.stringify(e))})["finally"](function(){o.$broadcast("scroll.refreshComplete"),o.$broadcast("scroll.infiniteScrollComplete")})}e.get("http://"+n.hostName+"/lawyer/workscopes",{cache:!0,headers:{"Content-Type":"application/json",Authorization:"bearer "+n.token}}).success(function(e){e.data?o.workscopes=e.data:layer.show("暂无数据！")}).error(function(e,o){console.info(JSON.stringify(e)),console.info(JSON.stringify(o))});var s=1;o.moredata=!0,o.items=[],o.search=function(){s=1,o.items=[],r()},o.searchCatId=function(){s=1,o.items=[],r()},o.doRefresh=function(){s=1,o.items=[],r()},o.loadMore=function(){r()}});